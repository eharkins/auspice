<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Contributing to Auspice development · Auspice</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Thank you for helping us to improve Nextstrain!"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Contributing to Auspice development · Auspice"/><meta property="og:type" content="website"/><meta property="og:url" content="https://nextstrain.github.io/auspice/"/><meta property="og:description" content="Thank you for helping us to improve Nextstrain!"/><meta property="og:image" content="https://nextstrain.github.io/auspice/img/icon.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://nextstrain.github.io/auspice/img/icon.svg"/><link rel="shortcut icon" href="/auspice/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/auspice/js/scrollSpy.js"></script><link rel="stylesheet" href="/auspice/css/main.css"/><script src="/auspice/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/auspice/"><img class="logo" src="/auspice/img/logo-light.svg" alt="Auspice"/><h2 class="headerTitleWithLogo">Auspice</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/auspice/introduction/overview" target="_self">Docs</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Contributing</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/auspice/introduction/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/auspice/introduction/install">Install Auspice</a></li><li class="navListItem"><a class="navItem" href="/auspice/introduction/how-to-run">How to Run Auspice</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Advanced Functionality</h3><ul class=""><li class="navListItem"><a class="navItem" href="/auspice/advanced-functionality/second-trees">Displaying multiple trees</a></li><li class="navListItem"><a class="navItem" href="/auspice/advanced-functionality/view-settings">View Settings</a></li><li class="navListItem"><a class="navItem" href="/auspice/advanced-functionality/drag-drop-csv-tsv">Adding extra metadata via CSV/TSV</a></li><li class="navListItem"><a class="navItem" href="/auspice/advanced-functionality/misc">Miscellaneous</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Customising Auspice</h3><ul class=""><li class="navListItem"><a class="navItem" href="/auspice/customise-client/introduction">Customising Auspice</a></li><li class="navListItem"><a class="navItem" href="/auspice/customise-client/api">Client Customisation API</a></li><li class="navListItem"><a class="navItem" href="/auspice/customise-client/requests">Requests Made from the Client</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Using a Custom Server</h3><ul class=""><li class="navListItem"><a class="navItem" href="/auspice/server/introduction">Auspice servers</a></li><li class="navListItem"><a class="navItem" href="/auspice/server/api">Server API</a></li><li class="navListItem"><a class="navItem" href="/auspice/server/authentication">Authentication</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Narratives</h3><ul class=""><li class="navListItem"><a class="navItem" href="/auspice/narratives/introduction">Communicating Results Using Narratives</a></li><li class="navListItem"><a class="navItem" href="/auspice/narratives/how-to-write">Writing a Narrative</a></li><li class="navListItem"><a class="navItem" href="/auspice/narratives/create-pdf">Converting a narrative to PDF</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Release Notes</h3><ul class=""><li class="navListItem"><a class="navItem" href="/auspice/releases/changelog">Changelog</a></li><li class="navListItem"><a class="navItem" href="/auspice/releases/v2">Auspice Version 2.0</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Contributing</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/auspice/contributing/overview">Contributing to Auspice development</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Contributing to Auspice development</h1></header><article><div><span><p>Thank you for helping us to improve Nextstrain!</p>
<blockquote>
<p><strong>To get started, please see <a href="https://github.com/nextstrain/.github/blob/master/CONTRIBUTING.md">the contributing guide</a> for useful information about how to pick an issue, submit your contributions, and so on.</strong></p>
</blockquote>
<p>This project strictly adheres to the <a href="https://github.com/nextstrain/.github/blob/master/CODE_OF_CONDUCT.md">Contributor Covenant Code of Conduct</a>.</p>
<p>Please see the <a href="https://github.com/orgs/nextstrain/projects">project boards</a> for currently available issues.</p>
<h2><a class="anchor" aria-hidden="true" id="contributing-code"></a><a href="#contributing-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributing code</h2>
<p>Code contributions are welcomed! <a href="https://nextstrain.github.io/auspice/introduction/install">Please see the main auspice docs</a> for details on how to install and run auspice from source.</p>
<p>Please comment on an open issue if you are working on it.
For changes unrelated to an open issue, please make an issue outlining what you would like to change/add.</p>
<p>Where possible, <strong>please rebase</strong> your work onto master rather than merging changes from master into your PR.</p>
<p>From a fork: <code>git pull --rebase upstream master</code></p>
<h3><a class="anchor" aria-hidden="true" id="make-sure-tests-are-passing"></a><a href="#make-sure-tests-are-passing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Make sure tests are passing</h3>
<p>We use the following libraries for all kinds of testing, so it'd help to read the docs to get familiar with their APIs and features:</p>
<ol>
<li><a href="https://github.com/facebook/jest"><code>Jest</code></a></li>
<li><a href="https://github.com/puppeteer/puppeteer/"><code>Puppeteer</code></a></li>
<li><a href="https://github.com/smooth-code/jest-puppeteer"><code>Jest-Puppeteer</code></a></li>
<li><a href="https://github.com/americanexpress/jest-image-snapshot"><code>Jest-Image-Snapshot</code></a></li>
</ol>
<p>When you submit a pull request to the auspice repository, a variety of integration and unit tests will need to pass before it can be merged.</p>
<p>You will likely want to run these tests locally before submitting:</p>
<p>First, install the dependencies with <code>npm i</code>, then:</p>
<h4><a class="anchor" aria-hidden="true" id="for-unit-tests"></a><a href="#for-unit-tests" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>For unit tests</h4>
<p>Run <code>npm test</code>.</p>
<h4><a class="anchor" aria-hidden="true" id="for-linting"></a><a href="#for-linting" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>For linting</h4>
<p>Run <code>npm run lint</code>. If there are issues run <code>npm run lint:fix</code>.</p>
<h4><a class="anchor" aria-hidden="true" id="for-integration-tests"></a><a href="#for-integration-tests" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>For integration tests</h4>
<blockquote>
<p>For integration tests to work, you'll need to have <code>git-lfs</code> installed (see below) as it stores the images that the snapshot tests will use.</p>
</blockquote>
<ol>
<li>Fetch the datasets with <code>npm run get-data</code> and <code>npm run get-narratives</code>.</li>
<li>Ensure you are <strong>not</strong> currently running the site locally, then run <code>npm run integration-test:ci</code>.</li>
</ol>
<h4><a class="anchor" aria-hidden="true" id="how-to-update-test-snapshots"></a><a href="#how-to-update-test-snapshots" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to update test snapshots</h4>
<ol>
<li>Unit tests: <code>npm run test -- -u</code></li>
<li>Integration tests <code>npm run integration-test -- -u</code></li>
</ol>
<h4><a class="anchor" aria-hidden="true" id="for-smoke-tests"></a><a href="#for-smoke-tests" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>For smoke tests</h4>
<ol>
<li>Fetch the datasets with <code>npm run get-data</code> and <code>npm run get-narratives</code>.</li>
<li>Ensure you are <strong>not</strong> currently running the site locally, then run <code>npm run smoke-test:ci</code>.</li>
</ol>
<h4><a class="anchor" aria-hidden="true" id="test-tips"></a><a href="#test-tips" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Test Tips</h4>
<ol>
<li><p>Run a single <code>describe()</code>, <code>it()</code>, or <code>test()</code> <strong>within a file</strong>, add <code>.only()</code>:</p>
<p>E.g., <code>describe.only()</code>, <code>it.only()</code>, or <code>test.only()</code></p></li>
<li><p>Run a single test file, append the following to your test command <code>-- relative_or_absolute_path/to/file</code>:</p>
<p>E.g., <code>npm run integration-test -- test/integration/zika.test.js</code></p></li>
<li><p>Run integration tests in headful mode, prepend <code>HEADLESS=false</code> to your command:</p>
<p>E.g., <code>HEADLESS=false npm run integration-test</code></p></li>
<li><p>For integration tests, please try to use <a href="https://github.com/smooth-code/jest-puppeteer/blob/master/packages/expect-puppeteer/README.md#api"><code>expect-puppeteer</code></a> as much as possible, and only resort to <code>puppeteer</code>'s native API when we can't do it with <code>expect-puppeteer</code>. The reason is because <code>expect-puppeteer</code> has better DX, as explained <a href="https://github.com/smooth-code/jest-puppeteer/blob/master/packages/expect-puppeteer/README.md#why-do-i-need-it">here</a></p></li>
<li><p>How to add a new integration image test:</p>
<ol>
<li><p>Wrap your image test with helper function <code>toMatchImageSnapshot()</code> from <code>test/integration/helpers.js</code>, and it will take a screenshot every <code>100ms</code> until it matches the expected snapshot or timeout (default: <code>10s</code>)</p></li>
<li><p>Temporarily add <code>page.waitFor(__ENOUGH__MS__)</code> before taking the new snapshot to give the browser enough time to render a complete image</p></li>
<li><p>Example: <code>test/integration/zika.test.js</code></p></li>
</ol></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="git-lfs"></a><a href="#git-lfs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>git-lfs</h2>
<p>We use <a href="https://github.com/git-lfs/git-lfs">Git Large File Storage</a> to manage certain assets.
Currently these are limited to images within the <code>./test</code> directory (which we use for snapshot integration testing) but this may change in the future.
If you are not using these images, you don't need to have <code>git-lfs</code> installed; however <strong>will not be able to run integration tests without it</strong>.
See <a href="https://git-lfs.github.com/">here</a> for installation instructions.</p>
<p>Helpful commands:</p>
<pre><code class="hljs css language-bash">git lfs status
git lfs ls-files <span class="hljs-comment"># list LFS tracked tiles</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="contributing-to-documentation"></a><a href="#contributing-to-documentation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributing to Documentation</h2>
<p>Nextstrain documentation is available at <a href="https://nextstrain.github.io/auspice/">nextstrain.github.io/auspice/</a>.</p>
<p>This documentation is built from files contained within the Auspice GitHub repo -- see the <a href="https://github.com/nextstrain/auspice/tree/master/docs-src">docs-src/README</a> within the <code>docs-src</code> directory for more details and instructions on how to contribute.</p>
<p>Note that currently the documentation must be rebuilt &amp; pushed to GitHub <em>after</em> a new version is released in order for the changelog to correctly appear at <a href="https://nextstrain.github.io/auspice/releases/changelog">nextstrain.github.io/auspice/releases/changelog</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="contributing-to-internationalization-and-localization-i18n-l18n"></a><a href="#contributing-to-internationalization-and-localization-i18n-l18n" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributing to Internationalization and Localization (i18n/l18n)</h2>
<p>If you can assist in efforts to translate the Auspice interface to more languages your assistance would be very much appreciated.
The currently available languages are displayed via a drop-down at the bottom of the sidebar.</p>
<h2><a class="anchor" aria-hidden="true" id="adding-a-new-language"></a><a href="#adding-a-new-language" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding a new language</h2>
<ol>
<li>Add the language to the <code>getlanguageOptions</code> function in <a href="https://github.com/nextstrain/auspice/blob/master/src/components/controls/language.js#L24">this file</a></li>
<li>If this is a new language, copy the folder (and the JSONs within it) <code>src/locales/en</code> and name it to match the language code for the new translation -- e.g. for Spanish this would be <code>src/locales/es</code></li>
<li>For each key-value in the JSONs, translate the english phrase to the new locale. (Do not modify the strings within <code>{{...}}</code> sections.)</li>
</ol>
<p>For example, a spanish translation would change the English:</p>
<pre><code class="hljs css language-json">  "sampled between {{from}} and {{to}}": "sampled between {{from}} and {{to}}",
  "and comprising": "and comprising",
</code></pre>
<p>to</p>
<pre><code class="hljs css language-json">  "sampled between {{from}} and {{to}}": "aislados entre {{from}} y {{to}}",
  "and comprising": "y compuesto de",
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="helper-script-to-check-what-parts-of-a-translation-are-out-of-date-or-missing"></a><a href="#helper-script-to-check-what-parts-of-a-translation-are-out-of-date-or-missing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Helper script to check what parts of a translation are out-of-date or missing</h2>
<p>Run <code>npm run diff-lang -- X</code>, where <code>X</code> is the language you wish to check, for instance <code>es</code>.
This will display the strings which:</p>
<ul>
<li>need to be added to the translation</li>
<li>are present but should be removed as they are no longer used</li>
<li>are present but are simply a copy of the English version &amp; need to be translated</li>
</ul>
<blockquote>
<p>Running <code>npm run diff-lang</code> will check all available languages.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="improving-an-existing-translation"></a><a href="#improving-an-existing-translation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improving an existing translation</h2>
<p>If a translation of a particular string is not yet available, then auspice will fall-back to the english version.</p>
<ol>
<li>Find the relevant key in the (EN) JSONs <a href="https://github.com/nextstrain/auspice/tree/master/src/locales/en">in this directory</a></li>
<li>Add the key to the JSON with the same name, but in the directory corresponding to the language you are translating into (see above for an example).</li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="releases-versioning"></a><a href="#releases-versioning" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Releases &amp; versioning</h2>
<p>New versions are released via the <code>./releaseNewVersion.sh</code> script from an up-to-date <code>master</code> branch. It will prompt you for the version number increase, push changes to the <code>release</code> branch and, as long as Travis-CI is successful then a new version will be automatically published to <a href="https://www.npmjs.com/package/auspice">npm</a>.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 24/03/2020</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/auspice/releases/v2"><span class="arrow-prev">← </span><span>Auspice Version 2.0</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#contributing-code">Contributing code</a><ul class="toc-headings"><li><a href="#make-sure-tests-are-passing">Make sure tests are passing</a></li></ul></li><li><a href="#git-lfs">git-lfs</a></li><li><a href="#contributing-to-documentation">Contributing to Documentation</a></li><li><a href="#contributing-to-internationalization-and-localization-i18n-l18n">Contributing to Internationalization and Localization (i18n/l18n)</a></li><li><a href="#adding-a-new-language">Adding a new language</a></li><li><a href="#helper-script-to-check-what-parts-of-a-translation-are-out-of-date-or-missing">Helper script to check what parts of a translation are out-of-date or missing</a></li><li><a href="#improving-an-existing-translation">Improving an existing translation</a></li><li><a href="#releases-amp-versioning">Releases &amp; versioning</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><a href="/auspice/"><img style="padding-left:20px" src="/auspice/img/logo-light.svg" alt="Auspice" width="66" height="58"/></a></div><div><h5>External Links</h5><a href="https://github.com/nextstrain/auspice">GitHub repo</a><a href="https://www.npmjs.com/package/auspice">NPM package</a><a href="https://nextstrain.org">Nextstrain</a></div><div><h5>Contact Us</h5><a href="mailto:hello@nextstrain.org">email</a><a href="https://twitter.com/hamesjadfield">twitter</a></div></section><section class="copyright">Website built by <a href="https://twitter.com/hamesjadfield">James Hadfield</a> using <a href="https://docusaurus.io">Docusaurus</a></section><section class="copyright">If you use auspice, please cite <a href="https://doi.org/10.1093/bioinformatics/bty407">Hadfield et al., 2018</a></section><section class="copyright">Copyright © 2014-2020 Richard Neher &amp; Trevor Bedford</section></footer></div></body></html>